$schema: "https://json-schema.org/draft/2020-12/schema"
title: "Group Manifest"
type: object
required:
  - group_id
  - display_name
  - template_version
  - domain
  - head
  - specialists
  - tool_profile
  - default_workdirs
  - quality_gates
properties:
  group_id:
    type: string
    pattern: "^[a-z0-9-]+$"
  display_name:
    type: string
    minLength: 3
  template_version:
    type: string
  domain:
    type: string
  head:
    type: object
    required: [agent_id, skill_name, mission]
    properties:
      agent_id: {type: string}
      skill_name: {type: string}
      mission: {type: string}
  specialists:
    type: array
    minItems: 1
    items:
      type: object
      required: [agent_id, skill_name, focus, required_references, required_outputs]
      properties:
        agent_id: {type: string}
        skill_name: {type: string}
        focus: {type: string}
        depends_on:
          type: array
          items: {type: string}
        required_references:
          type: array
          minItems: 1
          items: {type: string}
        required_outputs:
          type: array
          minItems: 1
          items: {type: string}
        execution:
          type: object
          properties:
            remote_transport:
              type: string
              enum: [local, ssh]
            scheduler:
              type: string
            hardware:
              type: string
            requires_gpu:
              type: boolean
  tool_profile:
    type: string
  interaction:
    type: object
    properties:
      mode:
        type: string
        enum: [interactive-separated]
      linked_groups:
        type: array
        items: {type: string}
  execution_defaults:
    type: object
    properties:
      remote_transport:
        type: string
        enum: [local, ssh]
      schedulers:
        type: array
        items: {type: string}
      hardware:
        type: array
        items: {type: string}
  default_workdirs:
    type: array
    minItems: 1
    items: {type: string}
  quality_gates:
    type: object
    required:
      - citation_required
      - unresolved_claims_block
      - peer_check_required
      - consistency_required
      - scope_required
      - reproducibility_required
    properties:
      citation_required: {type: boolean}
      unresolved_claims_block: {type: boolean}
      peer_check_required: {type: boolean}
      consistency_required: {type: boolean}
      scope_required: {type: boolean}
      reproducibility_required: {type: boolean}
additionalProperties: true
